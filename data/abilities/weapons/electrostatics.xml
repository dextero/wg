<root type="ability" class="bullet">

  <name>$ABI_WEAPONS_ELECTROSTATICS</name>
  <description>$ABI_WEAPONS_ELECTROSTATICS_DESC</description>
  <icon>data/abilities/weapons/electrostatics-0.png</icon>
  <unavailable-icon>data/abilities/weapons/electrostatics-1.png</unavailable-icon>

  <!-- power = 3x cho, 2x mel, 4x san, 1x phl -->
  <!-- power = (0.2 * (0.6 * choleric + 0.4 * melancholic + 0.8 * sanguine + 0.2 * phlegmatic)) --> 

  <explosion type="list">
    <effect type="graphical-effect">
      <name value="stars" />
      <time calc="0.5"/>
    </effect>
  </explosion>
  
  <effect type="list">
    <effect type="damage">
      <damage-type value="lightning"/>
      <amount calc="7.0 * (1 + (0.2 * (0.6 * choleric + 0.4 * melancholic + 0.8 * sanguine + 0.2 * phlegmatic)))"/>
    </effect>
    <effect type="chance">
	  <chance calc="0.0 + 0.01 * (0.2 * (0.6 * choleric + 0.4 * melancholic + 0.8 * sanguine + 0.2 * phlegmatic))"/>
      <effect type="non-cumulative">
        <effect type="timed">
		<time calc="0.5"/>
          <effect type="stun" />
		</effect>
	  </effect>
	</effect>

	<effect type="retarget">
	  <target-chooser>
	    <filter value="hostiles" />
		<range calc="1.0" />
		<angle value="360.0" />
		<aim-at-ground value="1"/>
		<count calc="4 + (0.01 * (0.2 * (0.6 * choleric + 0.4 * melancholic + 0.8 * sanguine + 0.2 * phlegmatic)))" />
	  </target-chooser>
	  <effect type="list">
	    <effect type="linked-graphical-effect">
          <name value="straight-lightning" />
		  <time value="0.3" />
		</effect>
		<effect type="damage">
	      <damage-type value="lightning"/>
		  <amount calc="4.0 * (1 + (0.2 * (0.6 * choleric + 0.4 * melancholic + 0.8 * sanguine + 0.2 * phlegmatic)))" />
		</effect>
      </effect>
    </effect>
  </effect>

  <range calc="18.0" />
  <speed value="8.5" />
  <acceleration value="3.0" />
  <count value="1" />
  <width value="10" />
  <ttl calc="1.0" />
  <explode-on-fade value="1" />
  <bullet value="data/physicals/bullets/electron.xml" />
  <extra-offset value="0.2"/>
  <bullet-angular-speed value="180"/>

  <manacost calc="4.5 * (1 + (0.2 * (0.6 * choleric + 0.4 * melancholic + 0.8 * sanguine + 0.2 * phlegmatic)))" />
  <casttime calc="0.09" />
  <delay calc="0.05" />
  <cooldown calc="0.70" />
</root>
