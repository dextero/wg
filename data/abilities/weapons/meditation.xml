<root type="ability" class="self">

  <name>$ABI_WEAPONS_MEDITATION</name>
  <description>$ABI_WEAPONS_MEDITATION_DESC</description>
  <icon>data/abilities/weapons/meditation-0.png</icon>
  <unavailable-icon>data/abilities/weapons/meditation-1.png</unavailable-icon>

  <!-- power = 0x cho, 4x mel, 0x san, 5x phl -->
  <power calc="0.2*((0*choleric+4*melancholic+0*sanguine+5*phlegmatic)/sqrt(0^2 + 4^2 + 0^2 + 5^2))*(((0*choleric+4*melancholic+0*sanguine+5*phlegmatic)/(sqrt(0^2+4^2+0^2+5^2)*sqrt(max(1,choleric^2+melancholic^2+sanguine^2+phlegmatic^2))))^10)"/>
  
  <effect type="list">
    <effect type="graphical-effect">
      <name value="hibernate" />
      <time value="5.0"/>
  	</effect>
    <effect type="sound">
      <name value="data/sounds/Lugaro/consolesuccess.ogg" />
    </effect>
    <effect type="timed">
      <time value="5.0" />
      <effect type="list">
        <effect type="restore-mana">
	      <amount calc="5.0 * (1 + power)"/>
        </effect>
        <effect type="modify">
          <aspect value="speed" />
          <amount value="0.0" />
        </effect>
        <effect type="modify">
          <aspect value="turnspeed" />
          <amount value="0.0" />
        </effect>
      </effect>
  	</effect>
  </effect>

  <cast-time-effect type="list">
    <effect type="delayed">
      <time calc="0.30"/>
      <effect type="graphical-effect">
        <name value="magic-circle-4"/>
        <time value="0.30"/>
      </effect> 
	</effect>
    <effect type="graphical-effect">
      <name value="magic-circle-5"/>
      <time value="0.60"/>
    </effect>
    <effect type="graphical-effect">
      <name value="magic-circle-2"/>
      <time value="0.40"/>
    </effect>
    <effect type="modify">
      <aspect value="speed" />
      <amount value="0.25" />
    </effect>
  </cast-time-effect>
  
  <manacost value="0.0" />
  <casttime value="0.6" />
  <delay value="0.05" />
  <cooldown value="5.0" />

  <focus-mana-cost value="0.0" />
  <focus-max-duration value="5.0" />
</root>
