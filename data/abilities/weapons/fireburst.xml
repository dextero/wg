<root type="ability" class="self">

  <name>$ABI_WEAPONS_FIREBURST_FIREBURST</name>
  <description>$ABI_WEAPONS_FIREBURST_DESC</description>
  <icon>data/abilities/weapons/fireburst-0.png</icon>
  <unavailable-icon>data/abilities/weapons/fireburst-1.png</unavailable-icon>

  <!-- power = 4x cho, 1x mel, 4x san, 1x phl -->
  <!-- power = (0.05 * (4 * choleric + 1 * melancholic + 4 * sanguine + 1 * phlegmatic)) -->
  
  <effect type="list">
    <effect type="graphical-effect">
      <name value="fire-circle-shockwave" />
      <time value="0.4" />
    </effect>
    <effect type="sound">
      <name value="data/sounds/Lugaro/break.ogg" />
    </effect>
    <effect type="area">
      <area calc="0.73"  />
      <filter value="hostiles,obstacle" />
      <effect type="list">
        <effect type="damage">	
          <damage-type value="fire"/>
          <amount calc="35.0 * (1 + (0.05 * (4 * choleric + 1 * melancholic + 4 * sanguine + 1 * phlegmatic)))" />
        </effect>
        <effect type="knockback">
          <amount calc="10.0"/>
        </effect>
        <effect type="chance">
          <chance calc="0.66 + (0.01 * (0.05 * (4 * choleric + 1 * melancholic + 4 * sanguine + 1 * phlegmatic)))"/>
		  <effect type="non-cumulative">
		    <effect type="list">
              <effect type="graphical-effect">
                <name value="flames" />
                <time calc="4" />
              </effect>
              <effect type="sound">
                <name value="data/sounds/Lugaro/fire.ogg" />
              </effect>
              <effect type="timed">
                <time calc="4"/>
                <effect type="damage">
                  <damage-type value="fire"/>
                  <amount value="3 + (0.25 * (0.05 * (4 * choleric + 1 * melancholic + 4 * sanguine + 1 * phlegmatic)))"/>
                </effect>
              </effect>
			</effect>
		  </effect>
        </effect>
      </effect>
    </effect>

    <effect type="bullet">
      <emitter>
        <explosion type="list">
          <effect type="graphical-effect">
            <time value="0.8" />
            <name value="bullet-explosion" />
          </effect>
          <effect type="graphical-effect">
            <time value="0.1" />
            <name value="tinyfireball" />
          </effect>
          <effect type="sound">
            <name value="data/sounds/Lugaro/fireend.ogg" />
          </effect>
          <effect type="area">
            <area calc="1.0" />
              <filter value="hostiles,obstacle" />
              <effect type="list">
                <effect type="damage">
                  <damage-type value="fire"/>
                  <amount calc="11 + (0.4 * (0.05 * (4 * choleric + 1 * melancholic + 4 * sanguine + 1 * phlegmatic)))" />
                </effect>
                <effect type="knockback">
                <amount calc="5 "/>
              </effect>
            </effect>
          </effect>
        </explosion>

        <range calc="12.0" />
        <speed value="6.0" />
        <ttl calc="12.0" />
        <count calc="7 + (0.4 * (0.05 * (4 * choleric + 1 * melancholic + 4 * sanguine + 1 * phlegmatic)))" />
        <width value="360" />
        <acceleration value="1.0" />
        <bullet value="data/physicals/bullets/flaming-arrow.xml" />
        <time-for-tracking calc="12.0"/>
        <turning-speed calc="720.0"/>
        <target-chooser>
          <filter value="hostiles"/>
          <range calc="2.5"/>
          <angle value="180.0"/>
        </target-chooser>
      </emitter>
    </effect>
  </effect>

  <cast-time-effect type="modify">
      <aspect value="speed" />
      <amount value="0.2" />
  </cast-time-effect>

  <delay-effect type="modify">
      <aspect value="speed" />
      <amount value="0.2" />
  </delay-effect>

  <manacost value="29 * (1 + (0.05 * (4 * choleric + 1 * melancholic + 4 * sanguine + 1 * phlegmatic)))" />
  <casttime calc="0.10" />
  <delay calc="0.05" />
  <cooldown value="1.1" />
</root>
